<?xml version="1.0" encoding="ISO-8859-1" ?>

<database name="liquidsite">
  <description>
    The Liquid Site database. All web content for the Liquid Site
    system is stored in these tables, except for binary files that are
    stored separately.
  </description>



  <table name="LS_CONFIGURATION">
    <description>
      The configuration parameter values. All parameters are stored
      in this table except for the database connection parameters that 
      are all stored in the 'WEB-INF/database.properties' file. The 
      special configuration parameter 'liquidsite.version' contains 
      the Liquid Site version number corresponding to this database.
    </description>
    <column name="NAME">
      <description>
        The configuration parameter name. The parameter names normally
        consist of ASCII alphanumeric characters with optional '.'
        characters separating different parts of the name. Please see
        separate documentation on configuration for more details on
        the configuration parameters available.
      </description>
      <type name="VARCHAR" size="50" required="true" />
    </column>
    <column name="VALUE">
      <description>
        The configuration parameter value. The parameter values are
        strings, possibly representing numbers or other types. Please
        see the separate documentation on configuration for the
        allowed values for any specific configuration parameter.
      </description>
      <type name="VARCHAR" size="200" required="true" />
    </column>
    <primarykey>
      <description>
        The configuration parameters are indexed by name.
      </description>
      <column name="NAME" />
    </primarykey>
  </table>



  <table name="LS_DOMAIN">
    <description>
      The user and site domains. Each domain contains it's own pool
      of resources, such as web sites, content, users, groups, etc.
      No data can be shared across domains, making it useful to 
      provide hosting for several organizations with a single 
      installation.
    </description>
    <column name="NAME">
      <description>
        The unique domain name. The domain name is the primary key, 
        and is used to identify the domain in most other tables. The 
        domain name SHOULD NOT be modified after creation, unless all
        referencing tables also are updated. If a domain is removed, 
        care must be taken to also remove all rows in referencing 
        tables.
      </description>
      <type name="VARCHAR" size="10" required="true" />
    </column>
    <column name="DESCRIPTION">
      <description>
        The domain description. The domain description normally 
        contains the owner or organization name, complete with 
        correct spacing and case. The domain description is only used
        in the administration application.
      </description>
      <type name="VARCHAR" size="100" required="true" />
    </column>
    <column name="COMMENT">
      <description>
        The domain comment. The domain comment can be used to add 
        additional information about a domain.
      </description>
      <type name="VARCHAR" size="250" required="true" />
    </column>
    <primarykey>
      <description>
        The domains are indexed by the unique name.
      </description>
      <column name="NAME" />
    </primarykey>
  </table>



  <table name="LS_USER">
    <description>
    </description>
    <column name="DOMAIN">
      <description>
      </description>
      <type name="VARCHAR" size="50" required="true" />
      <reference table="LS_DOMAIN" column="NAME" />
    </column>
    <column name="NAME">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
    </column>
    <column name="REAL_NAME">
      <description>
      </description>
      <type name="VARCHAR" size="100" required="true" />
    </column>
    <column name="EMAIL">
      <description>
      </description>
      <type name="VARCHAR" size="100" required="true" />
    </column>
    <column name="COMMENT">
      <description>
      </description>
      <type name="VARCHAR" size="200" required="true" />
    </column>
    <primarykey>
      <description>
        The user is uniquely indexed by domain and name.
      </description>
      <column name="DOMAIN" />
      <column name="NAME" />
    </primarykey>
  </table>



  <table name="LS_GROUP">
    <description>
    </description>
    <column name="DOMAIN">
      <description>
      </description>
      <type name="VARCHAR" size="50" required="true" />
      <reference table="LS_DOMAIN" column="NAME" />
    </column>
    <column name="NAME">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
    </column>
    <column name="DESCRIPTION">
      <description>
      </description>
      <type name="VARCHAR" size="100" required="true" />
    </column>
    <column name="COMMENT">
      <description>
      </description>
      <type name="VARCHAR" size="200" required="true" />
    </column>
    <primarykey>
      <description>
        The group is uniquely indexed by domain and name.
      </description>
      <column name="DOMAIN" />
      <column name="NAME" />
    </primarykey>
  </table>



  <table name="LS_USER_GROUP">
    <description>
    </description>
    <column name="DOMAIN">
      <description>
      </description>
      <type name="VARCHAR" size="50" required="true" />
      <reference table="LS_DOMAIN" column="NAME" />
    </column>
    <column name="USER">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
      <reference table="LS_USER" column="NAME" />
    </column>
    <column name="GROUP">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
      <reference table="LS_GROUP" column="NAME" />
    </column>
  </table>


  <table name="LS_CONTENT">
    <description>
      The content objects. The content objects consist of sites,
      pages, aliases, as well as articles, events, etc. In short, 
      all objects with associated permissions and revision handling
      are content objects. The content data is stored as named 
      attributes in the LS_ATTRIBUTE table. Binary data is normally
      not stored directly in the database, but as files in the file
      system (with the filename stored as an attribute).
    </description>
    <column name="DOMAIN">
      <description>
        The domain name. All content objects belong to a single 
        domain, disallowing content to be shared across domains.
      </description>
      <type name="VARCHAR" size="50" required="true" />
      <reference table="LS_DOMAIN" column="NAME" />
    </column>
    <column name="ID">
      <description>
        The content object identifier. Each object may exist in 
        several revisions, making it possible to revert to old
        versions if needed. The content identifier SHOULD NOT be 
        modified after creation, unless all referencing tables  also 
        are updated. If a content object is removed, care must be 
        taken to also remove all rows in referencing tables.
      </description>
      <type name="INTEGER" required="true" />
    </column>
    <column name="REVISION">
      <description>
        The content object revision. Each published version of an
        object is given a revision number, starting at one (1). The
        revision number zero (0) is used for working revisions, i.e.
        content versions that have not yet been published. When 
        editing a published object, a new work revision is created.
        When a work revision is published a new revision number is
        incrementally assigned.
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <column name="CATEGORY">
      <description>
        The content category (or class). All content objects belongs 
        to a single class of object, each having a minimum set of
        attributes with a certain well-defined meaning. Examples of
        such categories are site, directory, page, article, etc. The
        category number controls how the content object is 
        interpreted by the system. The list of defined category 
        numbers are present in the Content class.
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <column name="NAME">
      <description>
      </description>
      <type name="VARCHAR" size="200" required="true" />
    </column>
    <column name="PARENT">
      <description>
      </description>
      <type name="INTEGER" required="true" />
      <reference table="LS_CONTENT" column="ID" />
    </column>
    <column name="ONLINE">
      <description>
      </description>
      <type name="DATETIME" required="true" />
    </column>
    <column name="OFFLINE">
      <description>
      </description>
      <type name="DATETIME" required="true" />
    </column>
    <column name="MODIFIED">
      <description>
      </description>
      <type name="DATETIME" required="true" />
    </column>
    <column name="AUTHOR">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
      <reference table="LS_USER" column="NAME" />
    </column>
    <column name="COMMENT">
      <description>
      </description>
      <type name="VARCHAR" size="200" required="true" />
    </column>
    <primarykey>
      <description>
        The content is uniquely indexed by the object identifier and
        the revision number.
      </description>
      <column name="ID" />
      <column name="REVISION" />
    </primarykey>
    <index name="CONTEXT_IDX_1">
      <description>
        The content is commonly searched by category. This is used to
        find all object in a particular category in the domain, such
        as all sites or events.
      </description>
      <column name="DOMAIN" />
      <column name="CATEGORY" />
    </index>
    <index name="CONTEXT_IDX_2">
      <description>
        The content is commonly searched by identifier. This is used 
        to find all revisions of an object.
      </description>
      <column name="ID" />
    </index>
    <index name="CONTEXT_IDX_3">
      <description>
        The content is commonly searched by parent identifier. This
        is used to find all objects in a directory or topic.
      </description>
      <column name="PARENT" />
    </index>
  </table>



  <table name="LS_ATTRIBUTE">
    <description>
    </description>
    <column name="DOMAIN">
      <description>
        The domain name. All content objects belong to a single 
        domain, disallowing content to be shared across domains.
      </description>
      <type name="VARCHAR" size="50" required="true" />
      <reference table="LS_DOMAIN" column="NAME" />
    </column>
    <column name="CONTENT">
      <description>
      </description>
      <type name="INTEGER" required="true" />
      <reference table="LS_CONTENT" column="ID" />
    </column>
    <column name="REVISION">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
      <reference table="LS_CONTENT" column="REVISION" />
    </column>
    <column name="CATEGORY">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
      <reference table="LS_CONTENT" column="CATEGORY" />
    </column>
    <column name="NAME">
      <description>
      </description>
      <type name="VARCHAR" size="200" required="true" />
    </column>
    <column name="DATA_TYPE">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <column name="DATA">
      <description>
      </description>
      <type name="TEXT" required="true" />
    </column>
    <column name="SEARCHABLE">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <primarykey>
      <description>
        The content attributes is uniquely indexed by the object 
        identifier, revision number, and attribute name.
      </description>
      <column name="ID" />
      <column name="REVISION" />
      <column name="NAME" />
    </primarykey>
  </table>



  <table name="LS_PERMISSION">
    <description>
    </description>
    <column name="CONTENT">
      <description>
      </description>
      <type name="INTEGER" required="true" />
      <reference table="LS_CONTENT" column="ID" />
    </column>
    <column name="USER">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
      <reference table="LS_USER" column="NAME" />
    </column>
    <column name="GROUP">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
      <reference table="LS_GROUP" column="NAME" />
    </column>
    <column name="READ">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <column name="WRITE">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <column name="PUBLISH">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <column name="ADMIN">
      <description>
      </description>
      <type name="SMALLINT" required="true" />
    </column>
    <primarykey>
      <description>
        The content permission is uniquely indexed by the object 
        identifier, user name, and group name.
      </description>
      <column name="CONTENT" />
      <column name="USER" />
      <column name="GROUP" />
    </primarykey>
  </table>



  <table name="LS_LOCK">
    <description>
    </description>
    <column name="CONTENT">
      <description>
      </description>
      <type name="INTEGER" required="true" />
      <reference table="LS_CONTENT" column="ID" />
    </column>
    <column name="USER">
      <description>
      </description>
      <type name="VARCHAR" size="30" required="true" />
      <reference table="LS_USER" column="NAME" />
    </column>
    <column name="ACQUIRED">
      <description>
      </description>
      <type name="DATETIME" required="true" />
    </column>
    <primarykey>
      <description>
        The content lock is uniquely indexed by the object 
        identifier.
      </description>
      <column name="CONTENT" />
    </primarykey>
  </table>

</database>
